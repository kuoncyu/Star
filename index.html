<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ˜Ÿéš›èˆªè¡Œï¼šå…¨å¤©æ˜Ÿåœ–äº’å‹•ç™¾ç§‘</title>
    <style>
        :root {
            --bg-deep: #020408;
            --bg-panel: rgba(16, 25, 45, 0.95);
            --text-main: #e0f5ff;
            --accent-cyan: #34ebff;
            --accent-gold: #ffd700;
            --accent-red: #ff4757;
            --correct-green: #2ecc71;
            --btn-grad: linear-gradient(135deg, #00d2ff, #3a7bd5);
            --glass-border: 1px solid rgba(255, 255, 255, 0.12);
        }

        * { box-sizing: border-box; }

        body {
            background-color: var(--bg-deep);
            background-image: 
                radial-gradient(circle at 60% 40%, #101a30 0%, #000000 90%),
                url("data:image/svg+xml,%3Csvg width='300' height='300' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.05'/%3E%3C/svg%3E");
            color: var(--text-main);
            margin: 0;
            font-family: 'Segoe UI', Roboto, "Microsoft JhengHei", sans-serif;
            height: 100vh;
            overflow: hidden;
            user-select: none;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* è¦–çª—å®¹å™¨ */
        .screen {
            display: none;
            width: 95%;
            max-width: 1200px;
            height: 92vh;
            background: var(--bg-panel);
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 0 100px rgba(0, 210, 255, 0.15);
            backdrop-filter: blur(25px);
            border: var(--glass-border);
            position: relative;
            animation: fadeIn 0.5s ease-out;
            flex-direction: column;
        }
        .screen.active { display: flex; }

        #start-screen { height: auto; padding: 60px 30px; text-align: center; }
        #start-screen.active { display: block; }

        @keyframes fadeIn { from { opacity: 0; transform: scale(0.98); } to { opacity: 1; transform: scale(1); } }

        /* æ¨™é¡Œèˆ‡æŒ‰éˆ• */
        h1, h2 { color: var(--accent-cyan); text-transform: uppercase; letter-spacing: 3px; text-shadow: 0 0 20px rgba(52, 235, 255, 0.6); margin: 0 0 15px 0; }
        
        .btn {
            background: var(--btn-grad); border: none; padding: 12px 36px;
            color: white; font-size: 1.1em; font-weight: 700; border-radius: 50px;
            cursor: pointer; margin: 10px; transition: 0.3s;
            box-shadow: 0 5px 20px rgba(0, 210, 255, 0.3);
        }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 8px 30px rgba(52, 235, 255, 0.5); }
        .btn-secondary { background: rgba(255, 255, 255, 0.08); border: 1px solid rgba(255,255,255,0.2); box-shadow: none; }
        .btn-secondary:hover { background: rgba(255, 255, 255, 0.15); border-color: var(--accent-cyan); }

        /* éŸ³æ•ˆé–‹é—œ */
        #audio-controls { position: absolute; top: 25px; right: 25px; z-index: 100; }
        .icon-btn {
            background: rgba(0,0,0,0.5); border: 1px solid rgba(255,255,255,0.2);
            color: #fff; border-radius: 50%; width: 44px; height: 44px;
            cursor: pointer; display: flex; align-items: center; justify-content: center;
            transition: 0.3s;
        }
        .icon-btn.active { color: var(--accent-cyan); border-color: var(--accent-cyan); box-shadow: 0 0 15px rgba(52, 235, 255, 0.4); }

        /* --- éŠæˆ²æ¨¡å¼ä½ˆå±€ --- */
        #game-layout { display: flex; flex-direction: column; height: 100%; }
        #game-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; flex-shrink: 0; }
        #game-starmap-wrapper { 
            flex: 1; min-height: 300px; position: relative;
            border-radius: 16px; overflow: hidden;
            border: 1px solid rgba(80, 200, 255, 0.2);
            background: radial-gradient(circle at bottom, #0c162b 0%, #000000 100%);
        }
        #answer-options { 
            display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 10px; 
            margin-top: 15px; max-height: 150px; overflow-y: auto; flex-shrink: 0;
        }
        .option-btn {
            background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1);
            color: rgba(255,255,255,0.9); padding: 12px; border-radius: 12px;
            cursor: pointer; transition: 0.2s; font-size: 1em; display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .option-btn small { font-size: 0.8em; color: var(--accent-cyan); margin-top: 5px; display: none; }
        .option-btn.show-hint small { display: block; }
        .option-btn:hover:not(:disabled) { background: rgba(52, 235, 255, 0.15); border-color: var(--accent-cyan); }
        .option-btn.correct { background: rgba(46, 204, 113, 0.3) !important; border-color: var(--correct-green) !important; }
        .option-btn.incorrect { background: rgba(255, 71, 87, 0.3) !important; border-color: var(--accent-red) !important; }

        /* --- æ˜Ÿéš›ç™¾ç§‘ä½ˆå±€ (æ ¸å¿ƒä¿®æ”¹) --- */
        #enc-layout { display: flex; height: 100%; gap: 20px; overflow: hidden; margin-top: 10px; }
        
        /* å·¦å´åˆ—è¡¨ */
        #enc-sidebar {
            flex: 1; min-width: 220px; max-width: 280px;
            display: flex; flex-direction: column;
            background: rgba(0,0,0,0.3); border-radius: 16px; 
            border: 1px solid rgba(255,255,255,0.1); padding: 15px;
        }
        .search-box {
            width: 100%; padding: 12px; margin-bottom: 10px;
            border-radius: 8px; border: 1px solid rgba(255,255,255,0.2);
            background: rgba(0,0,0,0.4); color: #fff; outline: none;
        }
        .search-box:focus { border-color: var(--accent-cyan); }
        
        #enc-list { flex: 1; overflow-y: auto; padding-right: 5px; }
        .enc-item {
            padding: 12px; margin-bottom: 5px; border-radius: 8px; cursor: pointer;
            color: rgba(255,255,255,0.6); transition: 0.2s; display: flex; justify-content: space-between;
        }
        .enc-item:hover { background: rgba(255,255,255,0.1); color: #fff; }
        .enc-item.selected { background: rgba(52, 235, 255, 0.15); color: var(--accent-cyan); border: 1px solid rgba(52, 235, 255, 0.3); font-weight: bold; }

        /* å³å´æ˜Ÿåœ–èˆ‡æ•…äº‹ */
        #enc-content {
            flex: 3; display: flex; flex-direction: column;
            background: rgba(0,0,0,0.2); border-radius: 16px; 
            border: 1px solid rgba(255,255,255,0.1); padding: 20px;
            position: relative;
        }

        /* é€™æ˜¯é—œéµï¼šå…¨å¤©æ˜Ÿåœ–å®¹å™¨ */
        #enc-map-wrapper {
            flex: 2; /* ä½”æ“šå¤§éƒ¨åˆ†ç©ºé–“ */
            position: relative; border-radius: 12px; overflow: hidden;
            background: radial-gradient(circle at center, #0b1525 0%, #000 100%);
            border: 1px solid rgba(52, 235, 255, 0.2);
            cursor: crosshair;
        }
        
        #enc-story-area {
            flex: 1; /* æ•…äº‹åœ¨ä¸‹æ–¹ */
            margin-top: 15px; overflow-y: auto;
            border-top: 1px solid rgba(255,255,255,0.1); padding-top: 15px;
        }
        #enc-title { margin: 0 0 10px 0; color: var(--accent-gold); font-size: 1.8em; }
        #enc-desc { line-height: 1.6; color: #dceefb; font-size: 1.1em; text-align: justify; }

        /* Canvas */
        canvas { width: 100%; height: 100%; display: block; }
        
        /* æ»¾å‹•æ¢ */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: rgba(0,0,0,0.2); }
        ::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.15); border-radius: 4px; }

        @media (max-width: 800px) {
            .screen { padding: 15px; width: 100%; height: 100vh; border-radius: 0; }
            #enc-layout { flex-direction: column; }
            #enc-sidebar { width: 100%; max-width: none; height: 35%; }
            #enc-content { height: 65%; }
            #game-starmap-wrapper { height: 40vh; }
            #answer-options { grid-template-columns: 1fr 1fr; }
        }
    </style>
</head>
<body>

    <div id="audio-controls">
        <button id="bgm-btn" class="icon-btn" onclick="AudioSys.toggleBGM()" title="èƒŒæ™¯éŸ³æ¨‚">ğŸµ</button>
    </div>

    <div id="start-screen" class="screen active">
        <div style="height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center;">
            <div style="font-size: 80px; margin-bottom: 20px; filter: drop-shadow(0 0 30px var(--accent-cyan));">ğŸŒŒ</div>
            <h1>æ˜Ÿéš›èˆªè¡Œ</h1>
            <p style="color: #aab; margin-bottom: 40px; font-size: 1.2em;">
                å…¨å¤© 88 æ˜Ÿåº§åœ–é‘‘ & æŒ‘æˆ°<br>
                <span style="font-size:0.8em; color:var(--accent-gold);">V12.0 å…¨å¤©æ˜Ÿåœ–æ•´åˆç‰ˆ</span>
            </p>
            <button class="btn" onclick="Game.startChallenge()">ğŸš€ é–‹å§‹æŒ‘æˆ°</button>
            <button class="btn btn-secondary" onclick="Game.showEncyclopedia()">ğŸ“– æ˜Ÿéš›ç™¾ç§‘ (å…¨å¤©æ˜Ÿåœ–)</button>
        </div>
    </div>

    <div id="game-screen" class="screen">
        <div id="game-layout">
            <div id="game-header">
                <div style="font-size:0.9em; color:#889;">
                    é€²åº¦: <span id="progress-val" style="color:var(--accent-cyan);font-weight:bold;">1/10</span>
                </div>
                <h2 style="margin:0; font-size:1.4em;">è¾¨èªæ˜Ÿåº§</h2>
                <div style="font-size:0.9em; color:#889;">
                    ç©åˆ†: <span id="score-val" style="color:var(--accent-gold);font-weight:bold;">0</span>
                </div>
            </div>
            
            <div id="game-starmap-wrapper">
                <canvas id="game-canvas"></canvas>
            </div>
            
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
                 <div id="result-text" style="font-weight:bold; color:var(--accent-gold); min-height:24px;"></div>
                 <label style="font-size:0.9em; cursor:pointer; display:flex; align-items:center; gap:5px; background:rgba(255,255,255,0.1); padding:5px 10px; border-radius:15px;">
                    <input type="checkbox" id="hint-toggle" onchange="Game.toggleHints()"> ğŸ’¡ æç¤º
                </label>
            </div>
            
            <div id="answer-options"></div>
            
            <div style="margin-top:auto; padding-top:10px; display:flex; justify-content:center; gap:10px;">
                <button class="btn btn-secondary" onclick="Game.home()">âŒ‚ è¿”å›åŸºåœ°</button>
                <button id="next-btn" class="btn" style="display:none; background: linear-gradient(135deg, #10b981, #059669);" onclick="Game.nextQuestion()">å‰å¾€ä¸‹ä¸€æ˜Ÿå€ â”</button>
            </div>
        </div>
    </div>

    <div id="enc-screen" class="screen">
        <div style="display:flex; justify-content:space-between; align-items:center;">
            <h2 style="margin:0;">æ˜Ÿéš›ç™¾ç§‘å…¨æ›¸</h2>
            <button class="btn btn-secondary" style="padding:8px 20px; font-size:0.9em;" onclick="Game.home()">âŒ‚ è¿”å›</button>
        </div>
        
        <div id="enc-layout">
            <div id="enc-sidebar">
                <input type="text" class="search-box" placeholder="ğŸ” æœå°‹æ˜Ÿåº§..." oninput="Game.filterList(this.value)">
                <div id="enc-list"></div>
            </div>
            
            <div id="enc-content">
                <div id="enc-map-wrapper">
                    <canvas id="enc-canvas"></canvas>
                    <div style="position:absolute; bottom:10px; right:10px; background:rgba(0,0,0,0.5); padding:5px 10px; border-radius:15px; font-size:0.8em; color:rgba(255,255,255,0.7);">
                        é»æ“Šåˆ‡æ›é€£ç·š
                    </div>
                </div>
                <div id="enc-story-area">
                    <h3 id="enc-title">è«‹é¸æ“‡æ˜Ÿåº§</h3>
                    <p id="enc-desc">åœ¨å·¦å´åˆ—è¡¨ä¸­é¸æ“‡ä¸€å€‹æ˜Ÿåº§ï¼Œä¸Šæ–¹æ˜Ÿåœ–å°‡æœƒäº®èµ·è©²æ˜Ÿåº§çš„é€£ç·šä½ç½®ã€‚ä¸‹æ–¹å°‡é¡¯ç¤ºè©³ç´°çš„ç¥è©±æ•…äº‹ã€‚</p>
                </div>
            </div>
        </div>
    </div>

    <div id="result-screen" class="screen">
        <div style="height:100%; display:flex; flex-direction:column; justify-content:center; align-items:center;">
            <div style="font-size:80px; margin-bottom:20px;">ğŸ†</div>
            <h2>ä»»å‹™å®Œæˆ</h2>
            <div style="font-size:4em; color:var(--accent-gold); font-weight:800; text-shadow:0 0 30px rgba(255,215,0,0.5); margin:20px 0;" id="final-score">0</div>
            <div id="final-msg" style="color:#ddd; margin-bottom:40px; font-size:1.4em;"></div>
            <div>
                <button class="btn" onclick="Game.startChallenge()">ğŸ”„ é‡æ–°åŸ·è¡Œ</button>
                <button class="btn btn-secondary" onclick="Game.home()">âŒ‚ è¿”å›åŸºåœ°</button>
            </div>
        </div>
    </div>

    <script>
        // --- 88æ˜Ÿåº§ å®Œæ•´è³‡æ–™åº« (IAU æ¨™æº– + æç¤º + æ•…äº‹) ---
        const CONSTELLATIONS = [
            // é»ƒé“12å®® (ç²¾ä¿®)
            { name: "ç™½ç¾Šåº§", hint: "å›é ­çœ‹çš„ç¾Š", story: "ã€é‡‘ç¾Šæ¯›ã€‘å¸Œè‡˜ç¥è©±ä¸­ï¼Œè¼‰è‘—ç‹å­ä½›é‡Œå…‹ç´¢æ–¯é€ƒé›¢å¾Œæ¯è¿«å®³çš„é‡‘è‰²å…¬ç¾Šã€‚ç•™ä¸‹çš„ã€Œé‡‘ç¾Šæ¯›ã€æ˜¯é˜¿çˆ¾æˆˆè‹±é›„å°‹æ‰¾çš„å¯¶ç‰©ã€‚", stars: [{x:0.35, y:0.55, mag:2.0, isYellow:true}, {x:0.50, y:0.50, mag:2.6}, {x:0.60, y:0.55, mag:3.6}, {x:0.70, y:0.60, mag:4}], connections: [[0,1], [1,2], [2,3]] },
            { name: "é‡‘ç‰›åº§", hint: "Vå­—ç‰›è‡‰èˆ‡é•·è§’", story: "ã€å®™æ–¯çš„åŒ–èº«ã€‘å¤©ç¥å®™æ–¯ç‚ºäº†è¿½æ±‚è…“å°¼åŸºå…¬ä¸»æ­ç¾…å·´ï¼ŒåŒ–èº«ç‚ºä¸€éš»é›ªç™½çš„å…¬ç‰›ã€‚Vå­—å½¢æ˜Ÿåœ˜(ç•¢å®¿)æ˜¯ç‰›è‡‰ï¼Œç´…è‰²çš„ç•¢å®¿äº”æ˜¯ç‰›çœ¼ã€‚", stars: [{x:0.55, y:0.55, mag:0.85, isRed:true}, {x:0.48, y:0.62, mag:3.5}, {x:0.42, y:0.70, mag:3.5}, {x:0.70, y:0.45, mag:3}, {x:0.15, y:0.35, mag:1.6}, {x:0.25, y:0.90, mag:3}], connections: [[0,1],[1,2], [0,3], [3,4], [2,5]] },
            { name: "é›™å­åº§", hint: "ä¸¦è‚©çš„å…©å…„å¼Ÿ", story: "ã€å­¿ç”Ÿå…„å¼Ÿã€‘å¡æ–¯æ‰˜çˆ¾èˆ‡æ³¢å‘‚å…‹æ–¯ã€‚é€£ç·šå‘ˆç¾å…©å€‹ä¸¦è‚©ç«™ç«‹çš„äººå½¢ï¼ŒåŒ—æ²³äºŒèˆ‡åŒ—æ²³ä¸‰åˆ†åˆ¥æ˜¯å…©äººçš„é ­éƒ¨ã€‚", stars: [{x:0.30, y:0.15, mag:1.6}, {x:0.70, y:0.18, mag:1.2, isYellow:true}, {x:0.25, y:0.85, mag:2.0}, {x:0.75, y:0.85, mag:3.5}, {x:0.30, y:0.50, mag:3.0}, {x:0.70, y:0.50, mag:3.0}, {x:0.15, y:0.40, mag:3.5}, {x:0.85, y:0.40, mag:3.5}], connections: [[0,4],[4,2], [1,5],[5,3], [0,6], [1,7], [4,5]] },
            { name: "å·¨èŸ¹åº§", hint: "å€’Yå­—ï¼ŒåƒèƒèŸ¹è…³", story: "ã€èµ«æ‹‰çš„å·¨èŸ¹ã€‘è¢«æµ·æ ¼åŠ›æ–¯è¸©ç¢çš„å·¨èŸ¹ã€‚å½¢ç‹€ç‚ºç¶“å…¸çš„å€’ Y å­—å½¢ï¼Œä¸­å¿ƒæœ‰æ¨¡ç³Šçš„ M44 èœ‚å·¢æ˜Ÿåœ˜ã€‚", stars: [{x:0.5, y:0.5, mag:3.9}, {x:0.5, y:0.3, mag:4.2}, {x:0.25, y:0.7, mag:4.0}, {x:0.75, y:0.7, mag:3.9}, {x:0.4, y:0.4, mag:4.5}], connections: [[0,1], [0,2], [0,3], [1,4]] },
            { name: "ç…å­åº§", hint: "é®åˆ€é ­èˆ‡è‡¥ç…", story: "ã€æ¶…å¢¨äºçŒ›ç…ã€‘åˆ€æ§ä¸å…¥çš„çŒ›ç…ã€‚é ­éƒ¨æ˜¯åå¯«çš„å•è™Ÿï¼ˆé®åˆ€ï¼‰ï¼Œèº«é«”å‘å¾Œå»¶ä¼¸ï¼Œå°¾éƒ¨æ˜¯ä¸‰è§’å½¢ï¼Œæœ€äº®æ˜Ÿè»’è½…åå››ä½æ–¼å‰èƒ¸ã€‚", stars: [{x:0.70, y:0.65, mag:1.4, isBlue:true}, {x:0.75, y:0.50, mag:2}, {x:0.65, y:0.35, mag:2}, {x:0.50, y:0.25, mag:3}, {x:0.42, y:0.40, mag:3.5}, {x:0.58, y:0.50, mag:3.5}, {x:0.30, y:0.55, mag:2.6}, {x:0.15, y:0.45, mag:3.3}, {x:0.18, y:0.65, mag:2.1}], connections: [[0,1],[1,2],[2,3],[3,4],[4,5],[5,0], [5,6],[6,7],[7,8],[8,6]] },
            { name: "å®¤å¥³åº§", hint: "åœŸå­—å½¢/è‡¥å§¿", story: "ã€è¾²æ¥­å¥³ç¥ã€‘è¾²æ¥­å¥³ç¥å¾—å¢¨å¿’è€³ã€‚å½¢ç‹€åƒä¸€å€‹å·¨å¤§çš„åœŸå­—æˆ– Y å­—ï¼Œå‘ˆç¾è‡¥å§¿ï¼Œè§’å®¿ä¸€æ˜¯æ‰‹ä¸­æ‹¿è‘—çš„éº¥ç©—ã€‚", stars: [{x:0.50, y:0.70, mag:1.0, isBlue:true}, {x:0.42, y:0.48, mag:2.8}, {x:0.58, y:0.40, mag:3.4}, {x:0.35, y:0.35, mag:2.8}, {x:0.18, y:0.25, mag:3.6}, {x:0.65, y:0.25, mag:3}, {x:0.60, y:0.55, mag:3.5}], connections: [[0,1],[1,2],[2,3],[3,4], [2,5], [2,6]] },
            { name: "å¤©ç§¤åº§", hint: "å¤©å¹³å››é‚Šå½¢", story: "ã€æ­£ç¾©çš„å¤©å¹³ã€‘æ­£ç¾©å¥³ç¥çš„å¤©å¹³ï¼ŒåŸæœ¬æ˜¯å¤©è çš„é‰—å­ã€‚å½¢ç‹€æ˜¯ä¸è¦å‰‡çš„å››é‚Šå½¢ã€‚", stars: [{x:0.5, y:0.2, mag:2.6}, {x:0.2, y:0.5, mag:2.8}, {x:0.8, y:0.5, mag:2.6}, {x:0.5, y:0.8, mag:3.3}, {x:0.35, y:0.65, mag:4}], connections: [[0,1], [1,3], [3,2], [2,0]] },
            { name: "å¤©è åº§", hint: "Så‹å¤§é‰¤å°¾å·´", story: "ã€ç¥ç½°ä¹‹è ã€‘èŸ„æ­»çµäººå¥§ç‘æ©çš„æ¯’è ã€‚ç´…è‰²å¿ƒå®¿äºŒç‚ºå¿ƒè‡Ÿï¼Œå°¾å·´æœ‰æ˜é¡¯çš„ S å‹å€’é‰¤æ¯’é‡ï¼Œé ­éƒ¨æ˜¯æ‰‡å½¢ã€‚", stars: [{x:0.88, y:0.20, mag:2.5}, {x:0.82, y:0.25, mag:2.3}, {x:0.78, y:0.35, mag:2.9}, {x:0.70, y:0.45, mag:1.0, isRed:true}, {x:0.65, y:0.60, mag:2.8}, {x:0.55, y:0.75, mag:1.6}, {x:0.50, y:0.85, mag:3.0}, {x:0.40, y:0.90, mag:2.4}, {x:0.25, y:0.85, mag:1.6}, {x:0.15, y:0.75, mag:2.4}, {x:0.20, y:0.65, mag:3.0}, {x:0.30, y:0.60, mag:1.6}], connections: [[0,1],[1,2],[1,3],[3,4],[4,5],[5,6],[6,7],[7,8],[8,9],[9,10],[10,11]] },
            { name: "äººé¦¬åº§", hint: "èŒ¶å£ºå½¢ç‹€", story: "ã€åŠäººé¦¬è³¢è€…ã€‘åŠäººé¦¬å–€æˆã€‚å—æ–—å…­æ˜Ÿå½¢ä¼¼ä¸€æŠŠèŒ¶å£ºï¼Œæ­£å°éŠ€æ²³ä¸­å¿ƒã€‚", stars: [{x:0.30, y:0.45, mag:2.8}, {x:0.50, y:0.45, mag:2.6}, {x:0.55, y:0.65, mag:2}, {x:0.25, y:0.65, mag:1.8}, {x:0.70, y:0.25, mag:3}, {x:0.85, y:0.35, mag:2.8}, {x:0.15, y:0.80, mag:3}, {x:0.35, y:0.85, mag:2}], connections: [[0,1],[1,2],[2,3],[3,0], [1,4],[4,5], [3,6],[2,7]] },
            { name: "æ‘©ç¾¯åº§", hint: "æ¯”åŸºå°¼è¤²/å€’ä¸‰è§’", story: "ã€ç‰§ç¥æ½˜ã€‘ç‰§ç¥æ½˜è®Šèº«å¤±æ•—çš„æ¨¡æ¨£(ç¾Šé ­é­šå°¾)ã€‚å½¢ç‹€åƒä¸€å€‹å¤§å¤§çš„å€’ä¸‰è§’å½¢ã€‚", stars: [{x:0.15, y:0.25, mag:3.6}, {x:0.20, y:0.30, mag:3.0}, {x:0.85, y:0.25, mag:2.8}, {x:0.80, y:0.30, mag:3.7}, {x:0.50, y:0.80, mag:3.0}, {x:0.30, y:0.60, mag:4.0}, {x:0.70, y:0.60, mag:4.0}], connections: [[0,1], [2,3], [1,5], [5,4], [4,6], [6,3], [0,2]] },
            { name: "å¯¶ç“¶åº§", hint: "æ°´ç“¶èˆ‡æ°´æµ", story: "ã€æ–Ÿé…’å°‘å¹´ã€‘æ­£åœ¨å€’é…’çš„ç¾å°‘å¹´ç”˜å°¼æ¢…å¾·ã€‚å½¢ç‹€åŒ…å«é ‚éƒ¨çš„é ­éƒ¨ã€ä¸­å¤®çš„æ°´ç“¶ä»¥åŠå‘ä¸‹æµå‹•çš„å…©æ¢æ°´æµã€‚", stars: [{x:0.60, y:0.15, mag:2.9}, {x:0.35, y:0.10, mag:2.9}, {x:0.45, y:0.30, mag:3.8}, {x:0.50, y:0.35, mag:3.6}, {x:0.55, y:0.30, mag:4.0}, {x:0.40, y:0.30, mag:4.6}, {x:0.40, y:0.45, mag:4.0}, {x:0.30, y:0.60, mag:4.0}, {x:0.15, y:0.80, mag:4.0}, {x:0.55, y:0.45, mag:4.0}, {x:0.65, y:0.65, mag:4.0}, {x:0.75, y:0.85, mag:3.7}], connections: [[1,0], [1,5], [0,4], [5,2], [2,3], [3,4], [2,6], [6,7], [7,8], [3,9], [9,10], [10,11]] },
            { name: "é›™é­šåº§", hint: "Vå­—å½¢çµ²å¸¶", story: "ã€æ„›ç¥çš„çµ²å¸¶ã€‘å…©æ¢è¢«çµ²å¸¶ç¶åœ¨ä¸€èµ·çš„é­šï¼Œå‘ˆVå­—å½¢ã€‚å³å´é­šèº«æœ«ç«¯æœ‰å€‹å°åœ“ç’°ã€‚", stars: [{x:0.50, y:0.85, mag:3.6}, {x:0.10, y:0.30, mag:4}, {x:0.90, y:0.40, mag:4.2}, {x:0.85, y:0.32, mag:4.5}, {x:0.95, y:0.32, mag:4.5}], connections: [[1,0], [0,2], [2,3], [3,4], [4,2]] },

            // --- å…¶ä»–é‡è¦æ˜Ÿåº§ ---
            { name: "çµæˆ¶åº§", hint: "è…°å¸¶ï¼Œç›¾ç‰Œèˆ‡æœ¨æ£’", story: "ã€å†¬å­£ç‹è€…ã€‘çµäººå¥§ç‘æ©ã€‚æ“æœ‰è…°å¸¶ä¸‰æ˜Ÿï¼Œæ‰‹æŒç…çš®ç›¾ç‰Œèˆ‡é«˜èˆ‰æœ¨æ£’ã€‚", stars: [{x:0.40, y:0.25, mag:0.45, isRed:true}, {x:0.60, y:0.28, mag:1.6}, {x:0.45, y:0.50, mag:1.7}, {x:0.50, y:0.52, mag:1.7}, {x:0.55, y:0.54, mag:2.2}, {x:0.42, y:0.75, mag:2.1}, {x:0.62, y:0.72, mag:0.18, isBlue:true}, {x:0.50, y:0.62, mag:4}, {x:0.20, y:0.35, mag:3}, {x:0.75, y:0.10, mag:3}], connections: [[0,2],[2,5], [1,4],[4,6], [2,3],[3,4], [3,7], [0,8], [1,9]] },
            { name: "å¤§çŠ¬åº§", hint: "åè‘—çš„ç‹—ï¼Œå¤©ç‹¼æ˜Ÿ", story: "ã€å¤©ç‹¼æ˜Ÿã€‘çµæˆ¶çš„çµçŠ¬ï¼Œå¤©ç‹¼æ˜Ÿä½æ–¼èƒ¸å£/é¼»å­ã€‚å½¢ç‹€åƒä¸€éš»åè‘—çš„ç‹—ã€‚", stars: [{x:0.45, y:0.35, mag:-1.44, isBlue:true}, {x:0.35, y:0.25, mag:1.9}, {x:0.55, y:0.25, mag:3.0}, {x:0.55, y:0.55, mag:1.5}, {x:0.45, y:0.75, mag:2.4}, {x:0.65, y:0.70, mag:3.0}, {x:0.75, y:0.60, mag:3.0}], connections: [[0,1], [0,2], [0,3], [3,4], [3,5], [5,6]] },
            { name: "å°çŠ¬åº§", hint: "åƒ…æœ‰å…©é¡†äº®æ˜Ÿ", story: "å¦ä¸€éš»çµçŠ¬ï¼Œåƒ…æœ‰å…©é¡†äº®æ˜Ÿ (å—æ²³ä¸‰)ã€‚", stars: [{x:0.40, y:0.45, mag:0.4, isYellow:true}, {x:0.70, y:0.40, mag:2.9}], connections: [[0,1]] },
            { name: "å°ç†Šåº§", hint: "å°å‹ºå­ï¼ŒåŒ—æ¥µæ˜Ÿ", story: "ã€åŒ—æ¥µæ˜Ÿã€‘ä½æ–¼æ–—æŸ„æœ«ç«¯ï¼Œæ–—æŸ„å‘å¤–å½æ›²ï¼Œå½¢ä¼¼å°å‹ºå­ã€‚", stars: [{x:0.80, y:0.15, mag:2}, {x:0.65, y:0.22, mag:3}, {x:0.55, y:0.32, mag:3}, {x:0.48, y:0.45, mag:3}, {x:0.30, y:0.42, mag:3}, {x:0.32, y:0.25, mag:2}, {x:0.48, y:0.22, mag:3}], connections: [[0,1],[1,2],[2,3],[3,4],[4,5],[5,6],[6,3]] },
            { name: "å¤§ç†Šåº§", hint: "å¤§å‹ºå­(åŒ—æ–—)åŠ è…³çˆª", story: "å·¨å¤§çš„ç†Šï¼ŒèƒŒéƒ¨èˆ‡å°¾å·´æ˜¯è‘—åçš„åŒ—æ–—ä¸ƒæ˜Ÿã€‚é‚„åŒ…å«äº†è…³çˆªèˆ‡é ­éƒ¨ã€‚", stars: [{x:0.75, y:0.25, mag:1.8}, {x:0.72, y:0.38, mag:2.4}, {x:0.52, y:0.42, mag:2.4}, {x:0.45, y:0.30, mag:3.3}, {x:0.32, y:0.35, mag:1.8}, {x:0.22, y:0.45, mag:2.1}, {x:0.08, y:0.60, mag:1.9}, {x:0.6, y:0.6, mag:3}, {x:0.4, y:0.65, mag:3}, {x:0.9, y:0.3, mag:3}], connections: [[0,1],[1,2],[2,3],[3,0], [3,4],[4,5],[5,6], [2,7], [4,8], [0,9]] },
            { name: "ä»™ååº§", hint: "W å½¢æˆ– M å½¢", story: "è™›æ¦®çš„ç‹åï¼Œä½æ–¼åŒ—å¤©æ¥µé™„è¿‘ï¼Œå‘ˆç¾ W å½¢ã€‚", stars: [{x:0.10, y:0.25, mag:2.2}, {x:0.25, y:0.55, mag:2.2}, {x:0.50, y:0.45, mag:2.1}, {x:0.75, y:0.58, mag:2.7}, {x:0.90, y:0.20, mag:3.3}], connections: [[0,1], [1,2], [2,3], [3,4]] },
            { name: "å¤©éµåº§", hint: "åŒ—å¤©åå­—", story: "åŒ—å¤©å¤§åå­—ï¼Œå¤å­£å¤§ä¸‰è§’ä¹‹ä¸€ï¼Œå¤©æ´¥å››ã€‚", stars: [{x:0.50, y:0.15, mag:1.25}, {x:0.50, y:0.35, mag:2.2}, {x:0.50, y:0.55, mag:2.5}, {x:0.50, y:0.85, mag:3}, {x:0.25, y:0.45, mag:2.8}, {x:0.75, y:0.45, mag:2.5}], connections: [[0,1],[1,2],[2,3], [4,2],[2,5]] },
            { name: "å¤©ç´åº§", hint: "ç¹”å¥³æ˜Ÿå¹³è¡Œå››é‚Šå½¢", story: "ç¹”å¥³æ˜Ÿèˆ‡å¹³è¡Œå››é‚Šå½¢ã€‚", stars: [{x:0.80, y:0.15, mag:0.03, isBlue:true}, {x:0.68, y:0.32, mag:3.2}, {x:0.52, y:0.45, mag:3.2}, {x:0.72, y:0.45, mag:4.3}, {x:0.52, y:0.65, mag:3.8}, {x:0.72, y:0.65, mag:3.5}], connections: [[0,1],[1,3],[3,5],[5,4],[4,2],[2,1]] },
            { name: "é£›é¦¬åº§", hint: "ç§‹å­£å››é‚Šå½¢", story: "ç§‹å­£å››é‚Šå½¢ï¼Œé•·ç¿…è†€çš„é¦¬ã€‚", stars: [{x:0.30, y:0.25, mag:2.4}, {x:0.70, y:0.25, mag:2.5}, {x:0.30, y:0.65, mag:2.8}, {x:0.70, y:0.65, mag:2.1}, {x:0.92, y:0.12, mag:2.4}, {x:0.05, y:0.15, mag:3}], connections: [[0,1],[1,3],[3,2],[2,0], [1,4], [0,5]] },
            { name: "å—åå­—åº§", hint: "å—å¤©å°åå­—", story: "å—å¤©æœ€å°çš„æ˜Ÿåº§ï¼ŒæŒ‡å¼•æ­£å—æ–¹ã€‚", stars: [{x:0.50, y:0.85, mag:0.8, isBlue:true}, {x:0.55, y:0.15, mag:1.25, isRed:true}, {x:0.25, y:0.45, mag:1.3, isBlue:true}, {x:0.80, y:0.40, mag:2.8, isBlue:true}, {x:0.65, y:0.60, mag:3.6, isRed:true}], connections: [[1,0], [2,3]] },
            { name: "å¾¡å¤«åº§", hint: "å¤§äº”é‚Šå½¢", story: "æŠ±è‘—å±±ç¾Šçš„è»Šå¤«ã€‚ç‰¹å¾µæ˜¯æ˜é¡¯çš„å¤§äº”é‚Šå½¢ï¼Œæœ€äº®çš„æ˜¯äº”è»ŠäºŒã€‚", stars: [{x:0.45, y:0.15, mag:0.08, isYellow:true}, {x:0.75, y:0.20, mag:1.9}, {x:0.85, y:0.55, mag:2.6}, {x:0.55, y:0.80, mag:1.65, isBlue:true}, {x:0.25, y:0.55, mag:2.7}], connections: [[0,1], [1,2], [2,3], [3,4], [4,0]] },
            { name: "ç‰§å¤«åº§", hint: "é¢¨ç®å½¢ç‹€ï¼Œå¤§è§’æ˜Ÿ", story: "è¶•ç‰›äººã€‚å½¢ç‹€åƒä¸€å€‹å·¨å¤§çš„é¢¨ç®æˆ–å†°æ·‡æ·‹ç”œç­’ï¼Œåº•éƒ¨æ˜¯å¤§è§’æ˜Ÿã€‚", stars: [{x:0.50, y:0.85, mag:-0.05, isRed:true}, {x:0.35, y:0.60, mag:2.35}, {x:0.65, y:0.60, mag:2.68}, {x:0.30, y:0.30, mag:3.0}, {x:0.50, y:0.20, mag:3.5}, {x:0.70, y:0.30, mag:3.5}], connections: [[0,1], [1,3], [3,4], [4,5], [5,2], [2,0]] },
            { name: "å¤©é·¹åº§", hint: "æ‰æ“”æ˜Ÿèˆ‡ç¿…è†€", story: "å®™æ–¯çš„ä½¿è€…é·¹ã€‚ç‰¹å¾µæ˜¯ã€Œç‰›éƒæ˜Ÿã€èˆ‡å…©å´ã€Œæ‰æ“”æ˜Ÿã€çš„ç›´ç·šï¼Œä»¥åŠå±•ç¿…çš„å½¢ç‹€ã€‚", stars: [{x:0.50, y:0.40, mag:0.77}, {x:0.42, y:0.32, mag:2.7}, {x:0.58, y:0.48, mag:3.7}, {x:0.30, y:0.45, mag:3.4}, {x:0.15, y:0.55, mag:3.0}, {x:0.70, y:0.55, mag:3.2}, {x:0.45, y:0.75, mag:3.4}, {x:0.55, y:0.85, mag:3.9}], connections: [[1,0],[0,2], [0,3],[3,4], [0,5], [2,6],[6,7]] },
            { name: "å”§ç­’åº§", hint: "ä¸è¦å‰‡æŠ˜ç·š", story: "å—å¤©æš—æ·¡çš„æ˜Ÿåº§ï¼Œä»£è¡¨æ°£æ³µã€‚", stars: [{x:0.50, y:0.40, mag:4.25}, {x:0.65, y:0.30, mag:4.5}, {x:0.35, y:0.50, mag:4.6}, {x:0.55, y:0.60, mag:4.8}], connections: [[1,0], [0,2], [0,3]] },
            { name: "ä»™å¥³åº§", hint: "å…©æ¢ç·šæ¢å»¶ä¼¸", story: "è¢«é–éˆæŸç¸›çš„å…¬ä¸»ã€‚é ­éƒ¨èˆ‡é£›é¦¬åº§å…±äº«ï¼Œèº«é«”å»¶ä¼¸å‡ºå…©æ¢æ‰‹è‡‚ç·šæ¢ã€‚", stars: [{x:0.60, y:0.20, mag:2.1}, {x:0.50, y:0.35, mag:2.1}, {x:0.35, y:0.50, mag:2.1}, {x:0.55, y:0.30, mag:3.3}, {x:0.45, y:0.20, mag:4.3}, {x:0.40, y:0.55, mag:4.0}], connections: [[0,3],[3,1],[1,2], [3,4], [1,5]] },
            { name: "åŒ—å†•åº§", hint: "åŠåœ“å¼§å½¢çš‡å† ", story: "é…’ç¥é€çµ¦å…¬ä¸»é˜¿é‡Œé˜¿å¾·æ¶…çš„çš‡å† ã€‚ç”±ä¸ƒé¡†æ˜Ÿæ’æˆä¸€å€‹ç¾éº—çš„åŠåœ“å¼§å½¢ã€‚", stars: [{x:0.20, y:0.65, mag:4.1}, {x:0.30, y:0.50, mag:3.7}, {x:0.45, y:0.40, mag:2.2, isBlue:true}, {x:0.60, y:0.42, mag:3.8}, {x:0.75, y:0.50, mag:4.1}, {x:0.85, y:0.60, mag:4.6}, {x:0.92, y:0.75, mag:5.0}], connections: [[0,1], [1,2], [2,3], [3,4], [4,5], [5,6]] },
            { name: "å—å†•åº§", hint: "å—å¤©å°èŠ±ç’°", story: "å—å¤©çš„å°å‹èŠ±ç’°ç‹€æ˜Ÿåº§ï¼Œä½æ–¼äººé¦¬åº§å—æ–¹ã€‚å½¢ç‹€åƒä¸€å€‹é–‹å£çš„æ©¢åœ“æˆ–é¦¬è¹„éµã€‚", stars: [{x:0.25, y:0.70, mag:4.1}, {x:0.35, y:0.55, mag:4.2}, {x:0.50, y:0.45, mag:4.1}, {x:0.65, y:0.50, mag:4.1}, {x:0.75, y:0.65, mag:4.8}, {x:0.80, y:0.80, mag:5.0}], connections: [[0,1], [1,2], [2,3], [3,4], [4,5]] },
            { name: "çƒé´‰åº§", hint: "ç·Šæ¹Šæ¢¯å½¢", story: "é˜¿æ³¢ç¾…çš„ä¿¡ä½¿ï¼Œå½¢ç‹€æ˜¯ä½æ–¼é•·è›‡åº§èƒŒä¸Šçš„ç·Šæ¹Šå››é‚Šå½¢(æ¢¯å½¢)ã€‚", stars: [{x:0.35, y:0.30, mag:2.9}, {x:0.65, y:0.35, mag:2.6}, {x:0.75, y:0.70, mag:3.0}, {x:0.45, y:0.75, mag:3.1}], connections: [[0,1],[1,2],[2,3],[3,0]] },
            { name: "å·¨çˆµåº§", hint: "é«˜è…³æ¯", story: "é˜¿æ³¢ç¾…çš„é…’æ¯ï¼Œä½æ–¼çƒé´‰åº§æ—é‚Šã€‚å½¢ç‹€åƒä¸€å€‹æ˜é¡¯çš„é«˜è…³æ¯ã€‚", stars: [{x:0.45, y:0.75, mag:4.0}, {x:0.35, y:0.55, mag:4.1}, {x:0.60, y:0.60, mag:4.5}, {x:0.65, y:0.45, mag:3.5}, {x:0.25, y:0.35, mag:4.5}, {x:0.50, y:0.30, mag:4.8}, {x:0.70, y:0.25, mag:4.4}], connections: [[0,1], [1,2], [1,4], [4,5], [5,6], [6,3], [3,2]] },
            { name: "é¹¿è±¹åº§", hint: "èœ¿èœ’é•·é ¸é¹¿", story: "åŒ—å¤©æ¥µé™„è¿‘çš„å¤§å‹æš—æ·¡æ˜Ÿåº§ï¼Œè±¡å¾µé•·é ¸é¹¿ã€‚å½¢ç‹€èœ¿èœ’ã€‚", stars: [{x:0.3, y:0.1, mag:4.0}, {x:0.5, y:0.3, mag:4.0}, {x:0.6, y:0.5, mag:4.0}, {x:0.8, y:0.6, mag:4.3}, {x:0.5, y:0.7, mag:4.5}, {x:0.7, y:0.8, mag:4.5}], connections: [[0,1], [1,2], [2,3], [2,4], [3,5]] },
            { name: "é›•å…·åº§", hint: "å—å¤©å°é‘¿å­", story: "å—å¤©å°æ˜Ÿåº§ï¼Œè±¡å¾µé›•åˆ»ç”¨çš„é‘¿å­ã€‚ç”±å¹¾é¡†æš—æ˜Ÿé€£æˆä¸€ç·šã€‚", stars: [{x:0.4, y:0.3, mag:4.45}, {x:0.5, y:0.5, mag:4.5}, {x:0.55, y:0.7, mag:5.0}, {x:0.45, y:0.6, mag:5.0}], connections: [[0,1], [1,2], [1,3]] },
            { name: "å¤©é¶´åº§", hint: "é£›ç¿”çš„é¶´", story: "å—å¤©è‘—åçš„ã€Œå—å¤©å››é³¥ã€ä¹‹ä¸€ã€‚å½¢ç‹€åƒä¸€éš»é£›ç¿”çš„é¶´ã€‚", stars: [{x:0.5, y:0.2, mag:1.7}, {x:0.3, y:0.5, mag:2}, {x:0.7, y:0.6, mag:2.1}, {x:0.4, y:0.8, mag:3}], connections: [[0,1], [0,2], [1,3]] },
            { name: "åœ“è¦åº§", hint: "çª„ä¸‰è§’å½¢", story: "å—å¤©å°æ˜Ÿåº§ï¼Œä½æ–¼åŠäººé¦¬åº§æ—é‚Šï¼Œè±¡å¾µç¹ªåœ–ç”¨çš„åœ“è¦ã€‚", stars: [{x:0.50, y:0.20, mag:3.2}, {x:0.35, y:0.80, mag:4.0}, {x:0.65, y:0.70, mag:4.5}], connections: [[0,1], [0,2]] },
            {name: "å¤©ç‡•åº§", hint: "å—å¤©æ¥µæ¨‚é³¥", story: "æ¥µæ¨‚é³¥ï¼Œå—å¤©å°æ˜Ÿåº§ã€‚", stars: [{x:0.4,y:0.4,mag:4}, {x:0.6,y:0.5,mag:4}, {x:0.5,y:0.7,mag:4}], connections: [[0,1],[1,2]]},
            {name: "æ™‚é˜åº§", hint: "æ“ºé˜", story: "æ“ºé˜ï¼Œæ‹‰å¡ä¼Šå‰µç«‹ã€‚", stars: [{x:0.4,y:0.5,mag:4}, {x:0.6,y:0.6,mag:4}], connections: [[0,1]]},
            {name: "æ°´è›‡åº§", hint: "å°æ°´è›‡", story: "å—å¤©å°æ°´è›‡ï¼Œèˆ‡é•·è›‡åº§å€åˆ†ã€‚", stars: [{x:0.3,y:0.4,mag:3}, {x:0.7,y:0.6,mag:3}], connections: [[0,1]]},
            {name: "å°ç¬¬å®‰åº§", hint: "å°ç¬¬å®‰äºº", story: "è±¡å¾µç¾æ´²å°ç¬¬å®‰äººã€‚", stars: [{x:0.5,y:0.3,mag:3}, {x:0.5,y:0.7,mag:4}], connections: [[0,1]]},
            {name: "å±±æ¡ˆåº§", hint: "æ¡Œå±±", story: "è±¡å¾µå—éçš„æ¡Œå±±ã€‚", stars: [{x:0.4,y:0.5,mag:5}, {x:0.6,y:0.5,mag:5}], connections: [[0,1]]},
            {name: "é¡¯å¾®é¡åº§", hint: "é¡¯å¾®é¡", story: "ç´€å¿µé¡¯å¾®é¡çš„ç™¼æ˜ã€‚", stars: [{x:0.5,y:0.3,mag:5}, {x:0.4,y:0.7,mag:5}], connections: [[0,1]]},
            {name: "éº’éºŸåº§", hint: "ç¨è§’ç¸", story: "ä½æ–¼çµæˆ¶åº§æ—çš„ç¨è§’ç¸ã€‚", stars: [{x:0.3,y:0.5,mag:4}, {x:0.7,y:0.5,mag:4}], connections: [[0,1]]},
            {name: "è’¼è …åº§", hint: "è’¼è …", story: "å—å¤©çš„å°æ˜†èŸ²æ˜Ÿåº§ã€‚", stars: [{x:0.4,y:0.4,mag:3}, {x:0.6,y:0.5,mag:3}, {x:0.5,y:0.7,mag:4}], connections: [[0,1],[1,2]]},
            {name: "çŸ©å°ºåº§", hint: "ç›´è§’å°º", story: "æœ¨åŒ ç”¨çš„ç›´è§’å°ºã€‚", stars: [{x:0.4,y:0.5,mag:4}, {x:0.5,y:0.6,mag:4}], connections: [[0,1]]},
            {name: "å—æ¥µåº§", hint: "å—æ¥µé»", story: "å—æ¥µé»æ‰€åœ¨çš„æš—æ·¡æ˜Ÿåº§ã€‚", stars: [{x:0.4,y:0.4,mag:5}, {x:0.6,y:0.6,mag:5}], connections: [[0,1]]},
            {name: "åŠé­šåº§", hint: "é‡‘é­š/åŠé­š", story: "å¤§éº¥å“²å€«æ˜Ÿç³»æ‰€åœ¨çš„æ˜Ÿåº§ã€‚", stars: [{x:0.3,y:0.3,mag:3}, {x:0.7,y:0.5,mag:4}], connections: [[0,1]]},
            {name: "å°é¦¬åº§", hint: "å°é¦¬", story: "å…¨å¤©ç¬¬äºŒå°æ˜Ÿåº§ï¼Œåªæœ‰é¦¬é ­ã€‚", stars: [{x:0.4,y:0.4,mag:4}, {x:0.6,y:0.5,mag:4}], connections: [[0,1]]},
            {name: "å¤©çˆåº§", hint: "ç†”çˆ", story: "åŒ–å­¸å®¶ç”¨çš„ç†”çˆã€‚", stars: [{x:0.4,y:0.5,mag:4}, {x:0.6,y:0.5,mag:4}], connections: [[0,1]]},
            {name: "ç¶²ç½Ÿåº§", hint: "è±å½¢ç¶²", story: "æ¸¬é‡ç”¨çš„ç¶²ç·šã€‚", stars: [{x:0.4,y:0.4,mag:3}, {x:0.6,y:0.6,mag:3}], connections: [[0,1]]},
            {name: "ç‰å¤«åº§", hint: "é›•åˆ»å®¤", story: "é›•åˆ»å®¶çš„å·¥ä½œå®¤ã€‚", stars: [{x:0.4,y:0.5,mag:4}, {x:0.6,y:0.5,mag:4}], connections: [[0,1]]},
            {name: "ç›¾ç‰Œåº§", hint: "ç›¾ç‰Œ", story: "ç´¢æ¯”æ–¯åŸºçš„ç›¾ç‰Œã€‚", stars: [{x:0.4,y:0.4,mag:4}, {x:0.6,y:0.6,mag:4}], connections: [[0,1]]},
            {name: "å…­åˆ†å„€åº§", hint: "å…­åˆ†å„€", story: "å¤©æ–‡æ¸¬é‡å„€å™¨ã€‚", stars: [{x:0.4,y:0.5,mag:4}, {x:0.6,y:0.5,mag:4}], connections: [[0,1]]},
            {name: "æœ›é é¡åº§", hint: "æœ›é é¡", story: "ç´€å¿µæœ›é é¡çš„ç™¼æ˜ã€‚", stars: [{x:0.5,y:0.3,mag:3}, {x:0.5,y:0.7,mag:4}], connections: [[0,1]]},
            {name: "å—ä¸‰è§’åº§", hint: "æ­£ä¸‰è§’å½¢", story: "å—å¤©çš„ä¸‰è§’å½¢ã€‚", stars: [{x:0.5,y:0.7,mag:2}, {x:0.3,y:0.3,mag:2}, {x:0.7,y:0.3,mag:2}], connections: [[0,1],[1,2],[2,0]]},
            {name: "æœéµ‘åº§", hint: "æœéµ‘é³¥", story: "å°éº¥å“²å€«æ˜Ÿç³»æ‰€åœ¨çš„æ˜Ÿåº§ã€‚", stars: [{x:0.4,y:0.4,mag:3}, {x:0.6,y:0.5,mag:3}], connections: [[0,1]]},
            {name: "é£›é­šåº§", hint: "é£›é­š", story: "å—å¤©æœƒé£›çš„é­šã€‚", stars: [{x:0.4,y:0.4,mag:4}, {x:0.6,y:0.5,mag:4}], connections: [[0,1]]},
            {name: "ç‹ç‹¸åº§", hint: "ç‹ç‹¸", story: "ä½æ–¼å¤©éµåº§ä¸‹æ–¹çš„ç‹ç‹¸ã€‚", stars: [{x:0.4,y:0.5,mag:4}, {x:0.6,y:0.5,mag:4}], connections: [[0,1]]},
            {name: "ç¹ªæ¶åº§", hint: "ç•«æ¶", story: "ç•«å®¶çš„ç•«æ¶ã€‚", stars: [{x:0.4,y:0.5,mag:3}, {x:0.6,y:0.5,mag:3}], connections: [[0,1]]},
            {name: "ç¾…ç›¤åº§", hint: "ç¾…ç›¤", story: "å—èˆ¹åº§çš„ç¾…ç›¤ã€‚", stars: [{x:0.4,y:0.5,mag:4}, {x:0.6,y:0.5,mag:4}], connections: [[0,1]]},
            {name: "èˆ¹å°¾åº§", hint: "èˆ¹å°¾", story: "å—èˆ¹åº§çš„èˆ¹å°¾ã€‚", stars: [{x:0.4,y:0.3,mag:2}, {x:0.6,y:0.6,mag:2}], connections: [[0,1]]},
            {name: "æ³¢æ±Ÿåº§", hint: "èœ¿èœ’æ²³æµ", story: "è‘—åçš„æ³¢æ±Ÿï¼Œæºé ­åœ¨çµæˆ¶åº§æ—ã€‚", stars: [{x:0.2,y:0.2,mag:2.9}, {x:0.5,y:0.3,mag:3}, {x:0.4,y:0.5,mag:3}, {x:0.7,y:0.6,mag:3.5}], connections: [[0,1], [1,2], [2,3]]},
            {name: "é¯¨é­šåº§", hint: "æµ·æ€ª", story: "æµ·æ€ªçš„é ­éƒ¨äº”é‚Šå½¢ã€‚", stars: [{x:0.5,y:0.2,mag:2.5}, {x:0.8,y:0.4,mag:3.5}, {x:0.7,y:0.7,mag:3.6}, {x:0.3,y:0.7,mag:3.5}, {x:0.2,y:0.4,mag:4}], connections: [[0,1], [1,2], [2,3], [3,4], [4,0]]},
            {name: "é³³å‡°åº§", hint: "ç«é³³å‡°", story: "æµ´ç«é‡ç”Ÿçš„ä¸æ­»é³¥ã€‚", stars: [{x:0.5,y:0.2,mag:2.4}, {x:0.3,y:0.5,mag:3.3}, {x:0.7,y:0.5,mag:3}, {x:0.5,y:0.8,mag:3.1}], connections: [[0,1], [1,3], [3,2], [2,0]]},
            {name: "å­”é›€åº§", hint: "å­”é›€", story: "å—å¤©çš„ç¾éº—å­”é›€ã€‚", stars: [{x:0.2,y:0.2,mag:1.9}, {x:0.5,y:0.4,mag:3.4}, {x:0.8,y:0.3,mag:4}, {x:0.5,y:0.7,mag:3}], connections: [[0,1], [1,2], [1,3]]},
            {name: "èˆ¹å¸†åº§", hint: "èˆ¹å¸†", story: "å—èˆ¹åº§çš„å¸†ã€‚", stars: [{x:0.2,y:0.3,mag:1.7}, {x:0.5,y:0.5,mag:1.9}, {x:0.8,y:0.3,mag:2.2}, {x:0.5,y:0.8,mag:2.5}], connections: [[0,1], [1,2], [1,3]]},
            {name: "èˆ¹åº•åº§", hint: "é¾éª¨", story: "å—èˆ¹åº§çš„é¾éª¨ï¼Œæ“æœ‰å…¨å¤©ç¬¬äºŒäº®æ˜Ÿè€äººæ˜Ÿã€‚", stars: [{x:0.5,y:0.8,mag:-0.6}, {x:0.2,y:0.3,mag:2}, {x:0.8,y:0.3,mag:2}], connections: [[0,1],[0,2]]},
            {name: "åŠäººé¦¬åº§", hint: "å·¨å¤§çš„åŠäººé¦¬", story: "å—å¤©å·¨å¤§çš„æ˜Ÿåº§ï¼ŒåŒ…åœå—åå­—ã€‚", stars: [{x:0.2,y:0.8,mag:-0.1}, {x:0.4,y:0.7,mag:0.6}, {x:0.5,y:0.3,mag:2}, {x:0.8,y:0.3,mag:2.2}], connections: [[0,1], [1,2], [2,3]]},
            {name: "å¤©ç®­åº§", hint: "é£›è¡Œçš„ç®­", story: "æ„›ç¥çš„ç®­æˆ–æµ·æ ¼åŠ›æ–¯çš„ç®­ã€‚", stars: [{x:0.2,y:0.5,mag:4}, {x:0.7,y:0.5,mag:3.5}, {x:0.8,y:0.4,mag:4}, {x:0.8,y:0.6,mag:4}], connections: [[0,1], [1,2], [1,3]]},
            {name: "åé«®åº§", hint: "ç›´è§’å½¢æ˜Ÿåœ˜", story: "åŸƒåŠç‹åçš„é ­é«®ã€‚", stars: [{x:0.3,y:0.3,mag:4.3}, {x:0.3,y:0.7,mag:4.2}, {x:0.7,y:0.7,mag:4.3}], connections: [[0,1], [1,2]]},
            {name: "å—é­šåº§", hint: "å«åŒ—è½å¸«é–€", story: "æ­£åœ¨åé£Ÿå¯¶ç“¶åº§å€’å‡ºçš„æ°´ã€‚", stars: [{x:0.50,y:0.20,mag:1.2}, {x:0.20,y:0.40,mag:4}, {x:0.80,y:0.40,mag:4}], connections: [[0,1], [0,2]]},
            {name: "é•·è›‡åº§", hint: "é ­éƒ¨å°åœ“åœˆ", story: "å…¨å¤©æœ€é•·æ˜Ÿåº§ï¼Œé ­éƒ¨åœ¨å·¨èŸ¹åº§ä¸‹æ–¹ã€‚", stars: [{x:0.30,y:0.40,mag:4}, {x:0.45,y:0.30,mag:3.5}, {x:0.60,y:0.35,mag:3.8}, {x:0.65,y:0.50,mag:4.3}, {x:0.50,y:0.60,mag:4.5}, {x:0.35,y:0.55,mag:4}], connections: [[0,1],[1,2],[2,3],[3,4],[4,5],[5,0]]},
            {name: "è›‡å¤«åº§", hint: "å·¨å¤§äº”é‚Šå½¢", story: "æ‰‹æŒå·¨è›‡çš„é†«ç¥ã€‚", stars: [{x:0.50,y:0.10,mag:2}, {x:0.20,y:0.30,mag:2.7}, {x:0.80,y:0.30,mag:2.7}, {x:0.30,y:0.80,mag:2.5}, {x:0.70,y:0.80,mag:2.5}], connections: [[0,1], [1,3], [3,4], [4,2], [2,0]]},
            {name: "å·¨è›‡åº§", hint: "è›‡å¤«æ‰‹ä¸­çš„è›‡", story: "è›‡å¤«æ‰‹ä¸­çš„è›‡é ­ã€‚", stars: [{x:0.6,y:0.3,mag:2.6}, {x:0.4,y:0.5,mag:3}, {x:0.5,y:0.7,mag:3.5}], connections: [[0,1], [1,2]]},
            {name: "ä¸‰è§’åº§", hint: "ç´°é•·ä¸‰è§’å½¢", story: "åŒ—å¤©çš„ä¸‰è§’å½¢ã€‚", stars: [{x:0.2,y:0.8,mag:3}, {x:0.8,y:0.7,mag:3.4}, {x:0.5,y:0.2,mag:4}], connections: [[0,1], [1,2], [2,0]]},
            {name: "å¤©å£‡åº§", hint: "ç¥­å£‡", story: "ç¥­å£‡ï¼Œä½æ–¼å¤©è åº§å—æ–¹ã€‚", stars: [{x:0.3,y:0.3,mag:3}, {x:0.7,y:0.3,mag:3}, {x:0.3,y:0.7,mag:3}, {x:0.7,y:0.7,mag:3}], connections: [[0,1],[1,3],[3,2],[2,0]]}
        ];

        // --- éŸ³æ•ˆç³»çµ± ---
        const AudioSys = {
            ctx: null, masterGain: null, isPlaying: false, timer: null,
            init: function() {
                if (!this.ctx) {
                    const AudioContext = window.AudioContext || window.webkitAudioContext;
                    this.ctx = new AudioContext();
                    this.masterGain = this.ctx.createGain();
                    this.masterGain.gain.value = 0.4;
                    this.masterGain.connect(this.ctx.destination);
                }
                if(this.ctx.state === 'suspended') this.ctx.resume();
            },
            toggleBGM: function() {
                this.init(); this.isPlaying ? this.stopBGM() : this.startBGM();
            },
            startBGM: function() {
                if(this.isPlaying) return;
                this.isPlaying = true; document.getElementById('bgm-btn').classList.add('active');
                const freqs = [110, 164.81, 196.00, 220]; 
                freqs.forEach(f => {
                    const osc = this.ctx.createOscillator(); osc.type = 'sine'; osc.frequency.value = f;
                    const gain = this.ctx.createGain(); gain.gain.value = 0.025;
                    const lfo = this.ctx.createOscillator(); lfo.frequency.value = 0.1 + Math.random() * 0.2;
                    const lfoGain = this.ctx.createGain(); lfoGain.gain.value = 0.01;
                    lfo.connect(lfoGain); lfoGain.connect(gain.gain);
                    osc.connect(gain); gain.connect(this.masterGain);
                    osc.start(); lfo.start();
                    this.bgmNodes.push({osc, lfo, gain});
                });
            },
            stopBGM: function() {
                this.bgmNodes.forEach(node => { try { node.osc.stop(); node.lfo.stop(); } catch(e){} });
                this.bgmNodes = []; this.isPlaying = false;
                document.getElementById('bgm-btn').classList.remove('active');
            },
            playTone: function(freq) {
                if(!this.ctx) return;
                const osc = this.ctx.createOscillator();
                const gain = this.ctx.createGain();
                osc.type = 'triangle';
                osc.frequency.setValueAtTime(freq, this.ctx.currentTime);
                gain.gain.setValueAtTime(0.1, this.ctx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.001, this.ctx.currentTime + 0.3);
                osc.connect(gain); gain.connect(this.masterGain);
                osc.start(); osc.stop(this.ctx.currentTime + 0.3);
            }
        };

        // --- éŠæˆ²é‚è¼¯ ---
        const Game = {
            questions: [], currIdx: 0, score: 0, currData: null, isAnswered: false,

            globalInit: function() { AudioSys.init(); },

            showScreen: function(id) {
                document.querySelectorAll('.screen').forEach(el => el.classList.remove('active'));
                document.getElementById(id).classList.add('active');
            },

            start: function() {
                AudioSys.init();
                if(!AudioSys.isPlaying) AudioSys.startBGM(); 
                AudioSys.playTone(600);
                this.score = 0;
                this.currIdx = 0;
                this.questions = [...CONSTELLATIONS].sort(() => Math.random() - 0.5).slice(0, 10);
                this.showScreen('game-screen');
                this.loadQ();
            },

            home: function() {
                AudioSys.playTone(400);
                this.showScreen('start-screen');
            },

            toggleHints: function() {
                const btns = document.querySelectorAll('.option-btn');
                const isChecked = document.getElementById('hint-toggle').checked;
                btns.forEach(btn => {
                    if (isChecked) btn.classList.add('show-hint');
                    else btn.classList.remove('show-hint');
                });
            },

            loadQ: function() {
                this.isAnswered = false;
                this.currData = this.questions[this.currIdx];
                document.getElementById('progress-val').textContent = `${this.currIdx+1}/${this.questions.length}`;
                document.getElementById('score-val').textContent = this.score;
                document.getElementById('result-text').textContent = "";
                document.getElementById('next-btn').style.display = 'none';
                document.getElementById('hint-toggle').checked = false; 
                
                const container = document.getElementById('starmap-container');
                container.innerHTML = '';
                this.draw(this.currData, container, false);

                const optsDiv = document.getElementById('answer-options');
                optsDiv.innerHTML = '';
                let wrongs = CONSTELLATIONS.filter(c => c.name !== this.currData.name).sort(() => Math.random() - 0.5).slice(0, 3);
                let choices = [this.currData.name, ...wrongs.map(c => c.name)].sort(() => Math.random() - 0.5);

                choices.forEach(name => {
                    const btn = document.createElement('button');
                    btn.className = 'option-btn';
                    
                    const data = CONSTELLATIONS.find(c => c.name === name);
                    const hintText = data ? (data.hint || "") : "";
                    
                    btn.innerHTML = `<strong>${name}</strong><small>${hintText}</small>`;
                    btn.onclick = () => this.check(name, btn);
                    optsDiv.appendChild(btn);
                });
            },

            draw: function(data, container, showLines) {
                const w = container.clientWidth; const h = container.clientHeight;
                const p = Math.min(w, h) * 0.15; const dw = w - p*2; const dh = h - p*2;

                data.stars.forEach((s, i) => {
                    const x = p + s.x * dw; const y = p + s.y * dh;
                    const size = Math.max(2, 7 - s.mag * 1.3);
                    const el = document.createElement('div');
                    el.className = 'star target-star';
                    if(s.isRed) el.classList.add('red');
                    if(s.isYellow) el.classList.add('yellow');
                    if(s.isBlue) el.classList.add('blue');
                    el.style.left = x+'px'; el.style.top = y+'px';
                    el.style.width = size+'px'; el.style.height = size+'px';
                    el.dataset.idx = i; el.dataset.x = x; el.dataset.y = y;
                    container.appendChild(el);
                });

                if(!showLines && container.id === 'starmap-container') {
                    for(let i=0; i<60; i++) {
                        const el = document.createElement('div');
                        el.className = 'star';
                        el.style.opacity = Math.random()*0.5;
                        el.style.left = Math.random()*w+'px'; el.style.top = Math.random()*h+'px';
                        const sz = Math.random()*1.5;
                        el.style.width = sz+'px'; el.style.height = sz+'px';
                        container.appendChild(el);
                    }
                }
                if(showLines) this.lines(data, container);
            },

            lines: function(data, container) {
                const stars = Array.from(container.querySelectorAll('.target-star'));
                if(data.connections) {
                    data.connections.forEach(pair => {
                        const s1 = stars.find(s => parseInt(s.dataset.idx) === pair[0]);
                        const s2 = stars.find(s => parseInt(s.dataset.idx) === pair[1]);
                        if(s1 && s2) {
                            const x1 = parseFloat(s1.dataset.x); const y1 = parseFloat(s1.dataset.y);
                            const x2 = parseFloat(s2.dataset.x); const y2 = parseFloat(s2.dataset.y);
                            const len = Math.hypot(x2-x1, y2-y1);
                            const ang = Math.atan2(y2-y1, x2-x1) * 180 / Math.PI;
                            const l = document.createElement('div');
                            l.className = 'line';
                            l.style.width = len+'px'; l.style.left = x1+'px'; l.style.top = y1+'px';
                            l.style.transform = `rotate(${ang}deg)`;
                            container.appendChild(l);
                            setTimeout(() => l.classList.add('visible'), 50);
                        }
                    });
                }
            },

            check: function(ans, btn) {
                if(this.isAnswered) return;
                this.isAnswered = true;
                const isCorrect = ans === this.currData.name;
                const txt = document.getElementById('result-text');
                const allBtns = document.querySelectorAll('.option-btn');
                
                allBtns.forEach(b => b.disabled = true);

                if(isCorrect) {
                    AudioSys.playTone(880);
                    btn.classList.add('correct');
                    this.score += 10;
                    txt.style.color = "var(--correct-green)";
                    txt.innerText = "â˜… è§€æ¸¬æˆåŠŸï¼";
                } else {
                    AudioSys.playTone(150);
                    btn.classList.add('incorrect');
                    allBtns.forEach(b => {
                        if(b.innerHTML.includes(`<strong>${this.currData.name}</strong>`)) b.classList.add('correct');
                    });
                    txt.style.color = "var(--accent-red)";
                    txt.innerText = `æ­£ç¢ºç­”æ¡ˆï¼š${this.currData.name}`;
                }
                
                document.getElementById('score-val').textContent = this.score;
                this.lines(this.currData, document.getElementById('starmap-container'));
                document.getElementById('next-btn').style.display = 'block';
            },

            next: function() {
                AudioSys.playTone(600);
                this.currIdx++;
                if(this.currIdx < this.questions.length) this.loadQ();
                else this.result();
            },

            result: function() {
                this.showScreen('result-screen');
                document.getElementById('final-score').textContent = this.score;
                const correct = this.score / 10;
                document.getElementById('final-msg').innerText = `ç­”å° ${correct} / 10 é¡Œ`;
            },

            filterEncyclopedia: function(val) {
                const list = document.getElementById('enc-list');
                list.innerHTML = '';
                const searchTerm = val.trim().toLowerCase();
                const filtered = CONSTELLATIONS.filter(c => c.name.includes(searchTerm));
                
                filtered.sort((a,b) => a.name.localeCompare(b.name, 'zh-Hant')).forEach(c => {
                    const item = document.createElement('div');
                    item.className = 'enc-item';
                    item.textContent = c.name;
                    item.onclick = () => {
                        document.querySelectorAll('.enc-item').forEach(i=>i.classList.remove('selected'));
                        item.classList.add('selected');
                        
                        document.getElementById('enc-placeholder').style.display = 'none';
                        document.getElementById('enc-content').style.display = 'block';
                        
                        document.getElementById('enc-title').textContent = c.name;
                        document.getElementById('enc-story').innerText = c.story || "æš«ç„¡è©³ç´°å‚³èªª";
                        
                        const mapContainer = document.getElementById('enc-map-container');
                        mapContainer.innerHTML = '';
                        this.draw(c, mapContainer, true);
                        
                        mapContainer.onclick = () => {
                            const hasL = mapContainer.querySelectorAll('.line').length > 0;
                            mapContainer.innerHTML = '';
                            this.draw(c, mapContainer, !hasL);
                        };
                        
                        AudioSys.playTone(600);
                    };
                    list.appendChild(item);
                });
            },
            
            showEncyclopedia: function() {
                AudioSys.playTone(400);
                this.showScreen('enc-screen');
                document.getElementById('enc-search').value = '';
                this.filterEncyclopedia(''); 
            },

            showGallery: function() {
                AudioSys.playTone(400);
                this.showScreen('gallery-screen');
                document.getElementById('gallery-search').value = '';
                this.filterGallery('');
            },

            filterGallery: function(val) {
                const grid = document.getElementById('gallery-grid');
                grid.innerHTML = '';
                const searchTerm = val.trim().toLowerCase();
                const filtered = CONSTELLATIONS.filter(c => c.name.includes(searchTerm));
                
                filtered.forEach(c => {
                    const item = document.createElement('div');
                    item.className = 'gallery-item';
                    const prev = document.createElement('div');
                    prev.className = 'gallery-preview';
                    prev.id = 'p-'+c.name;
                    const lbl = document.createElement('div');
                    lbl.textContent = c.name; lbl.style.fontSize = '0.85em';
                    item.append(prev, lbl);
                    item.onclick = () => {
                        const hasL = prev.querySelectorAll('.line').length > 0;
                        prev.innerHTML = '';
                        this.draw(c, prev, !hasL);
                    };
                    grid.appendChild(item);
                    setTimeout(() => this.draw(c, prev, true), 0);
                });
            }
        };

        document.addEventListener('click', Game.globalInit, { once: true });
        window.onresize = () => {
            if(document.getElementById('game-screen').classList.contains('active') && !Game.isAnswered) {
                document.getElementById('starmap-container').innerHTML = '';
                Game.draw(Game.currData, document.getElementById('starmap-container'), false);
            }
        };
    </script>
</body>
</html>
